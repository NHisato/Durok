DPCデータ抽出・整形プログラム（通称　Durok）


【1.はじめに】------------------------------------------------------------------

この「DPCデータ抽出・整形プログラム（通称　Durok）」は、大規模なデータを分析す
るためのスクリプト言語であるPigを使用してDPCデータの抽出・整形を簡単に行うための
支援プログラムです。


【2.作者】----------------------------------------------------------------------

堀口　裕正 (hiromasa-tky@umin.ac.jp)


【3.ライセンス】----------------------------------------------------------------

  GNU 一般公衆利用許諾契約書(GNU General Public License:GPL) Version 3

  本プログラムには、"GNU 一般公衆利用許諾契約書(GNU General Public License:GPL) 
  Version 3"(以下GNU GPL)を適用します。このライセンスは次のような特徴を持ちます。

  ・ソースコードが公開されている 
  ・誰でも自由にプログラムの複製、頒布、改変ができる 
  ・派生するソフトウェアにもGNU GPLを適用しなければならない 
  ・GNU GPLのより詳しい内容はCOPYING.txt(英文)をご覧ください。

  他の団体・プロジェクト等で作成されたプログラムについて

  このパッケージには、本プログラムを使用するために必要なもので、他の団体・
  プロジェクト等で作成されたプログラムも同梱されています。
  これらのプログラムの著作権は、それぞれのプログラムの作者が保有しています。
  改変・再配布等の条件はそれぞれのプログラムのライセンスに従ってください。

  同梱プログラム
  ・Pig     http://pig.apache.org/
  ・Cygwin  http://www.cygwin.com/
  ・Qt      http://qt.nokia.com/

1) Pig(Version 0.8.0)
   大規模なデータを分析するためのスクリプト言語。Apache Software Foundation の下
   で進められているボランティアによるオープンソースプロジェクト。

2) Cygwin(Version 1.7.7)
   Microsoft Windowsオペレーティングシステム上で動作するUNIXライクな環境。

3) Qt(キュート)(Version 4.7.1)
   ノルウェーのQtソフトウェア社によって開発された、C++言語で書かれたクロス・プラ
   ットフォームGUIツールキット。オープンソース版のライセンスはGPL。


【4.アーカイブ内容】------------------------------------------------------------
  help.html							ヘルプ・ファイル
  Durok.exe							本アプリケーション本体
  Durok.ini							本アプリケーションのiniファイル
  QtCore4.dll						Qtのダイナミック・リンク・ライブラリ
  QtGui4.dll						Qtのダイナミック・リンク・ライブラリ
  mingwm10.dll						Qtのダイナミック・リンク・ライブラリ
  libgcc_s_dw2-1.dll				Qtのダイナミック・リンク・ライブラリ
  Durok.qm							日本語用言語ファイル
  
pluginsフォルダ
  Qtプラグイン

cygwinフォルダ以下
  Cygwin上のPig実行環境

srcフォルダ
  本プログラムのソースファイル
  
csrcフォルダ
  pig-0.8.0.tar.gz					Pigソース
  cygwin-1.7.7-1.tar.bz2			Cygwinソース
  qt-sdk-win-opensource-2010.05.exe	Qtソース

docフォルダ
  NEWS.txt							変更履歴
  readme.txt						このファイル
  COPYING.txt						GNU 一般公有使用許諾書


【5.インストール方法】----------------------------------------------------------

※本プログラムを動作させるには、JAVA(JRE)をインストールしておく必要があります。
下記のURLでJAVA(JRE)がインストールされているかどうかを確認することができます。
http://www.java.com/ja/download/installed.jsp

JAVAがインストールされていない場合は、下記のURLからJAVA(JRE)のセットアップ・ファ
イルをダウンロードしてインストールしてください。
http://www.java.com/ja/download/

JAVA(JRE)は標準で下記のフォルダにインストールされます。
　32ビット版OS → C:\Program Files\Java\jre6\
　64ビット版OS → C:\Program Files (x86)\Java\jre6\

注意：インストールフォルダを変更した場合は、本アプリケーションの iniファイルに、
その旨記述する必要があります。
【記述例】JAVA_HOME=C:/Program Files (x86)/MyFolder/Java/jre6/

1) Durok-x.x.zip（x.xはバージョン番号）ファイルの上でマウス右クリックします。

2)「すべて展開」を選択します。
※メニューに「すべて展開」がない場合は、ダブルクリック等で解凍してください。

3) 展開ウィザードが開きますので、次へボタンを押下します。

4) ファイル展開先フォルダは、デスクトップ等適当なローカルフォルダを選択し、次へボ
タンを押下します。
※本プログラムは、処理実行の際にインストール・フォルダにファイルをコピーして作業し
ますので、ディスクに十分な空き容量があることをご確認ください。
※ネットワーク上のフォルダに展開すると正しく動作しません。

5) 完了ボタンを押下します。


【6.起動方法】------------------------------------------------------------------

展開されたフォルダ内の「Durok.exe」（拡張子が表示されない設定の場合は「Durok」と
表示されます）をダブルクリックすると、本プログラムが起動します。


【7.ファイル仕様】--------------------------------------------------------------

1)スクリプト・ファイル
スクリプト・ファイルは以下の規約に従って作成してください。

・EFファイル（複数選択可）は、「EF」という名称で参照できるようにUNION句が自動生成
されますので、スクリプト中では「EF」で参照してください。
・Dファイル（複数選択可）は、「D」という名称で参照できるようにUNION句が自動生成
されますので、スクリプト中では「D」で参照してください。
・FF1ファイル（複数選択可）は、「FF1」という名称で参照できるようにUNION句が自動生
成されますので、スクリプト中では「FF1」で参照してください。
・同様にFF3、FF4ファイルについてもそれぞれ「FF3」「FF4」で参照してください。
・マスターを使用する場合は「MASTER = load 'master.txt' as」に続けて項目の定義を記
述してください。
スクリプト内に「MASTER = 」の記述がある場合は、GUIで選択されたマスター・ファイル
が、「master.txt」というファイル名でPig作業フォルダにコピーされます。
【記述例】
MASTER = load 'master.txt' as (a:int,b,c:int);
・出力データは「FINALDATA = 」に続けて記述してください。
Store句は自動生成されますので、記述しないでください。
【記述例】
FINALDATA = Join Ya by ($0.$0,$0.$1,$0.$2), Yb by ($0.$0,$0.$1,$0.$2);

2)出力ファイル
抽出・整形されたファイルは、指定した出力フォルダに「output.txt」というファイル名
で作成されます。
また、UDFファイルが組み込まれている場合は、指定した出力フォルダに「.header」とい
うファイル名でヘッダー・ファイルが作成され、「.schema」というファイル名でスキーマ
ファイルが作成されます。


【8.iniファイル内容】-----------------------------------------------------------

1)JAVA(JRE)のパス

[JAVA]
JAVA_HOME=C:/Program Files (x86)/Java/jre6/

JAVA(JRE)のパスが記述されています。
「\」を「/」に置き換えて記述してください。
JAVA(JRE)は標準で下記のフォルダにインストールされます。
　32ビット版OS → C:\Program Files\Java\jre6\
　64ビット版OS → C:\Program Files (x86)\Java\jre6\

注意：JAVAのインストールフォルダを変更した場合は、記述を書き変えてください。
【記述例】JAVA_HOME=C:/Program Files (x86)/MyFolder/Java/jre6/


2)タイムアウト時間

[Timeout]
ProcessExecution=600

子プロセスとして実行するPigのタイムアウト時間を記述することができます。


3)UDFファイル名

[UDF]
FileName=PigUDF.jar

組み込まれているUDFのファイル名が記述されています。
設定メニューでUDFを差し替えた際に書き換えられます。
UDFはディレクトリ pig-x.x.x/lib に配置されます。


【9.アンインストール方法】----------------------------------------------------------
本プログラムをアンインストール方法は以下のとおりです。

本プログラムのフォルダ削除します。

